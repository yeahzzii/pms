
-- 채팅 유저 테이블
CREATE TABLE CHATUSER(
	USER_UUID VARCHAR2(36),
	USER_NAME VARCHAR2(100) UNIQUE NOT NULL,
	USER_PASSWORD VARCHAR2(100) NOT NULL,
	USER_PIC VARCHAR2(100) DEFAULT 'default.jpg',
	CONSTRAINT PK_UUID PRIMARY KEY (USER_UUID)
);

-- 샘플 데이터
INSERT INTO CHATUSER VALUES('3f1a00ad-50fa-4a09-90cb-f8c1484e2860','test','1234',DEFAULT);
INSERT INTO CHATUSER VALUES('80eadce8-7c25-4d7d-847a-800b03a71a90','lemon','1234',DEFAULT);
INSERT INTO CHATUSER VALUES('40d1f9b7-7e32-4b30-b784-ee425c804384','apple','1234',DEFAULT);
INSERT INTO CHATUSER VALUES('9363106c-db42-4891-a478-cd1b96889b57','orange','1234',DEFAULT);


-- 채팅룸 테이블
CREATE TABLE CHATROOM(
    ROOM_ID VARCHAR2(36),
    USER_UUID VARCHAR2(100) NOT NULL,
    CONSTRAINT PK_ROOM_ID PRIMARY KEY (ROOM_ID)
);

-- 채팅 메세지 테이블
CREATE TABLE CHATMESSAGE(
    ROOM_ID VARCHAR2(36),
    MESSAGE_CONTENT VARCHAR2(4000),
    MESSAGE_REGDATE DATE DEFAULT SYSDATE,
    USER_UUID VARCHAR2(36) NOT NULL,
    UNREAD_COUNT NUMBER DEFAULT 1,
    CONSTRAINT CK_UNREAD_COUNT CHECK(UNREAD_COUNT IN(0,1))
);